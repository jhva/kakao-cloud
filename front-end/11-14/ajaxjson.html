<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        //window.addEventListener("load")한 이유 먼저실행되기때문에 
        window.addEventListener("load", (e) => {
            let button = document.getElementById("btn");
            let display = document.getElementById("display");

            button.addEventListener("click", (e) => {

                let req = new XMLHttpRequest();
                //요청준비
                req.open('GET', 'data.json');
                //요청 보내기
                req.send('');
                //응답 받기 


                //성공했을때
                req.addEventListener("load", () => {
                    req

                    let result = JSON.parse(req.responseText); //날아온 데이터 파싱
                    // display.innerHTML = result.count;

                    let dataArray= result.document;

                    dataArray.forEach((data)=>{
                        display.innerHTML+=data.name;
                    })
                 
                    // display.innerHTML = request.responseText;
                })


                req.addEventListener("error", (e) => {
                    display.innerHTML = e.message;
                })

            })
        })

    </script>
</head>


<body>
    <button id="btn">json 데이터가져오기</button>
    <div id="display"></div>
</body>

</html>